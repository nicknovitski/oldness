#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.expand_path(File.dirname(__FILE__)) + '/../lib/')

require 'date'
require 'oldness'

#subcommand =  ARGV[0]

### parse date object from final argument

date_info = ARGV[2].split("-")

if date_info[0] == ''
  date_info.shift
  date_info[0] = '-' + date_info[0]
end

date_of_work_to_rate = Date.new(*date_info.map {|v| v.to_i})

### parse date object from second argument

date_of_first_work = case ARGV[1]
                       when 'novel', 'book' then Date.new(1010) # Tale of Genji
                       when 'film', 'movie' then Date.new(1894, 2, 5) # Jean Le Roy's "marvellous cinematograph"
                       when 'comic', 'manga' then Date.new(1837) # Histoire de M. Vieux Bois
                       when 'videogame' then Date.new(1951, 5, 4) # NIMROD
                       when 'history' then Date.new(-411) # end of Thucydides' history
                       when 'literature' then Date.new(-1300) # Epic of Gilgamesh
                       when 'philosophy', 'religion' then Date.new(-800) # The Upanishads
                       when 'animation', 'cartoon', 'anime'  then Date.new(1906, 4, 6) #Humorous Phases of Funny Faces
                       else raise Exception
                     end

print "*" * oldness_rating(date_of_work_to_rate, date_of_first_work) + "\n"

# todo: detect pluralization?


